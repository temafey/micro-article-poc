# Production Environment Configuration
# Copy this file to .env.prod and customize for your environment

###> symfony/framework-bundle ###
APP_COMPANY_NAME=company
APP_PROJECT_NAME=Micro
APP_SERVICE_NAME=article
APP_ACL_NAME=acl
APP_ENV=prod
APP_SECRET=CHANGE_THIS_TO_A_SECURE_SECRET_KEY
APP_VERSION=1.0.0
APP_DEBUG=false
###< symfony/framework-bundle ###

###> common variables ###
DOCKER_PHP_VERSION=8.4
DOCKER_NETWORK_NAME=prod_article_net
DOCKER_SERVER_HOST=registry.example.com
DOCKER_IMAGE_VERSION=v1.0.0
DOCKER_PROJECT_PATH=micro-article-system
CI_SERVICE_NAME=micro-article-system
DOCKER_PHP_CONTAINER_NAME=micro-article-system-rest
###< common variables ###

###> postgresql ###
APP_DATABASE_HOST=database-host
APP_DATABASE_PORT=5432
APP_DATABASE_EXT_PORT=5432
APP_DATABASE_NAME=micro-article-system

# Root/Admin user - FULL PRIVILEGES (for migrations only)
APP_DATABASE_ROOT_LOGIN=admin_user
APP_DATABASE_ROOT_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# Service user - RESTRICTED PRIVILEGES (for application runtime)
APP_DATABASE_SERVICE_LOGIN=article_service
APP_DATABASE_SERVICE_PASSWORD=CHANGE_THIS_SERVICE_PASSWORD

# Default connection uses service user
APP_DATABASE_LOGIN=article_service
APP_DATABASE_PASSWORD=CHANGE_THIS_SERVICE_PASSWORD
###< postgresql ###

###> nelmio/cors-bundle ###
APP_CORS_ALLOW_ORIGIN=https://yourdomain.com
###< nelmio/cors-bundle ###

###> RabbitMQ credentials ###
APP_RABBITMQ_HOST=rabbitmq-host
APP_RABBITMQ_PORT=5672
APP_RABBITMQ_EXT_PORT=5672
APP_RABBITMQ_ADMIN_EXT_PORT=15672
APP_RABBITMQ_ADMIN_PORT=15672
APP_RABBITMQ_VHOST=article
APP_RABBITMQ_USER=article_user
APP_RABBITMQ_PASS=CHANGE_THIS_RABBITMQ_PASSWORD
APP_RABBITMQ_API_PORT=15672
APP_QUEUE_HOST=rabbitmq-host
APP_QUEUE_PORT=5672
###< RabbitMQ credentials ###

###> redis ###
APP_REDIS_HOST=redis-host
APP_REDIS_PORT=6379
APP_REDIS_EXT_PORT=6379
###< redis ###

###> security ###
# Stateless CSRF Protection (Symfony 8.0+)
CSRF_PROTECTION_ENABLED=true

# Message Signing (HMAC-SHA256)
# Secret key for signing messages (uses APP_SECRET if not set)
# IMPORTANT: Set a unique 32+ character secret for production
MESSAGE_SIGNING_SECRET=CHANGE_THIS_TO_A_SECURE_SIGNING_KEY
# Message lifetime in seconds (default: 300 = 5 minutes)
MESSAGE_LIFETIME=300
# Whether to require signatures on SignedMessageInterface commands
# PRODUCTION: Enable to enforce cryptographic message validation
MESSAGE_REQUIRE_SIGNATURE=true
###< security ###

###> php-8.4 (PRODUCTION OPTIMIZED) ###
# OPcache Configuration (PHP 8.4)
# Production: JIT enabled with tracing for FPM
PHP_OPCACHE_JIT=tracing
PHP_OPCACHE_JIT_BUFFER_SIZE=256M
PHP_OPCACHE_MEMORY_CONSUMPTION=512
# Production: No timestamp validation (deploy clears cache)
PHP_OPCACHE_VALIDATE_TIMESTAMPS=0
PHP_OPCACHE_REVALIDATE_FREQ=0

# Xdebug disabled in production
XDEBUG_MODE=off
###< php-8.4 ###
